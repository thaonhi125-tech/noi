<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N ∆°i - C·ªông ƒë·ªìng NhiLe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Japandi Color Palette & Custom Styles */
        :root {
            --bg-color: #FBF9F5;
            --primary-color: #8B5E3C;
            --primary-light: #C4A484;
            --text-color: #2D2D2D;
            --white: #FFFFFF;
            --yellow-accent: #FBBF24;
            --yellow-light: #FEF3C7;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #C4A484; border-radius: 10px; }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.6s ease-out forwards; }

        @keyframes pulse-custom {
            0%, 100% { box-shadow: 0 0 0 0 rgba(139, 94, 60, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(139, 94, 60, 0); }
        }
        .animate-pulse-ring { animation: pulse-custom 2s infinite; }

        /* UI Elements */
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08);
        }

        .nav-item.active { color: var(--primary-color); font-weight: bold; }
        .nav-item.active-learning { color: var(--yellow-accent); font-weight: bold; }
        .nav-item.active::after {
            content: ''; display: block; width: 6px; height: 6px;
            background: var(--primary-color); border-radius: 50%; margin: 4px auto 0;
        }
        .nav-item.active-learning::after {
            content: ''; display: block; width: 6px; height: 6px;
            background: var(--yellow-accent); border-radius: 50%; margin: 4px auto 0;
        }

        .ai-float {
            position: fixed; bottom: 90px; right: 20px; width: 60px; height: 60px;
            background-color: var(--primary-color); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); cursor: pointer;
            z-index: 50; color: white; font-size: 24px;
        }

        .chart-container { position: relative; width: 100%; max-width: 600px; height: 300px; margin: 0 auto; }
        
        /* Auth Screen specific */
        .google-btn {
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        .google-btn:hover { background-color: #f9fafb; transform: translateY(-1px); }

        /* Custom utility for no-scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Instagram Style Stories */
        .story-ring {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            padding: 2px;
            border-radius: 50%;
        }
        .story-avatar {
            border: 2px solid white;
            border-radius: 50%;
        }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden text-gray-800 bg-[#FBF9F5]">

    <!-- Auth Section -->
    <div id="auth-container" class="fixed inset-0 z-[100] bg-[#FBF9F5] flex flex-col items-center justify-center px-8 text-center">
        <div class="fade-in flex flex-col items-center">
            <div class="w-20 h-20 bg-white rounded-3xl shadow-sm flex items-center justify-center text-3xl mb-6 border border-gray-100">
                N
            </div>
            <h1 class="text-3xl font-bold mb-2 tracking-tight">M·ª´ng b·∫°n v·ªÅ nh√†</h1>
            <p class="text-gray-500 mb-12 max-w-xs leading-relaxed">
                N∆°i th·∫•u hi·ªÉu ch√≠nh m√¨nh v√† ki·∫øn t·∫°o v·∫≠n m·ªánh c√πng c·ªông ƒë·ªìng NhiLe.
            </p>
            
            <button onclick="app.signIn()" class="google-btn bg-white w-full max-w-sm py-4 rounded-2xl flex items-center justify-center space-x-4 shadow-sm mb-4">
                <svg class="w-5 h-5" viewBox="0 0 24 24">
                    <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                    <path d="M12 23c2.97 0 5.46-.98 7.28-2.67l-3.57-2.77c-1 .67-2.28 1.07-3.71 1.07-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                    <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                    <path d="M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                </svg>
                <span class="font-medium text-gray-700">Ti·∫øp t·ª•c v·ªõi Google</span>
            </button>
            
            <p class="text-[12px] text-gray-400 mt-8 uppercase tracking-widest font-medium">T√¢m - T·∫ßm - ƒê·ª©c</p>
        </div>
    </div>

    <!-- Main App Wrapper -->
    <div id="main-app" class="hidden flex flex-col h-full w-full">
        <!-- Header Section -->
        <header id="main-header" class="flex-none px-4 pt-6 pb-4 bg-transparent z-10">
            <!-- Header content will be rendered by JS -->
        </header>

        <!-- Main Content Area -->
        <main id="app-content" class="flex-1 overflow-y-auto relative scroll-smooth no-scrollbar">
            <!-- Content injected via JS -->
        </main>

        <!-- AI Floating Assistant -->
        <div id="ai-trigger" class="ai-float animate-pulse-ring hidden" onclick="app.toggleAIChat()">
            üßò
        </div>

        <!-- AI Chat Modal -->
        <div id="ai-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-end sm:items-center justify-center transition-opacity duration-300">
            <div class="bg-white w-full sm:w-96 sm:rounded-2xl rounded-t-3xl h-[80vh] sm:h-[600px] flex flex-col overflow-hidden shadow-2xl transform transition-transform duration-300 translate-y-full" id="ai-panel">
                <div class="bg-japandi-wood p-4 text-white flex justify-between items-center" style="background-color: var(--primary-color);">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center">‚ú®</div>
                        <span class="font-bold text-sm">Digital Nhi Le</span>
                    </div>
                    <button onclick="app.toggleAIChat()" class="text-white/80 hover:text-white text-xl">&times;</button>
                </div>
                <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-[#FBF9F5]" id="chat-history"></div>
                <div class="p-4 bg-white border-t border-gray-100">
                    <div class="flex space-x-2">
                        <input type="text" id="ai-input" placeholder="H·ªèi Nhi ƒëi·ªÅu g√¨ ƒë√≥..." class="flex-1 bg-gray-50 border border-gray-200 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-japandi-wood">
                        <button onclick="app.sendMessage()" class="bg-japandi-wood text-white w-10 h-10 rounded-full flex items-center justify-center" style="background-color: var(--primary-color);">‚û§</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="flex-none bg-white/80 backdrop-blur-lg border-t border-gray-100/80 pb-safe pt-2 px-6 z-20 shadow-[0_-4px_15px_-1px_rgba(0,0,0,0.05)] rounded-t-2xl">
            <div class="flex justify-between items-center max-w-md mx-auto h-16">
                 <button class="nav-item flex flex-col items-center justify-center w-16 active-learning" data-tab="home" onclick="app.navigate('home')">
                    <span class="text-2xl mb-1">üìñ</span>
                    <span class="text-[10px] font-medium">H·ªçc T·∫≠p</span>
                </button>
                <button class="nav-item flex flex-col items-center justify-center w-16" data-tab="community" onclick="app.navigate('community')">
                    <span class="text-2xl mb-1">ü§ù</span>
                    <span class="text-[10px] font-medium">K·∫øt N·ªëi</span>
                </button>
                <button class="nav-item flex flex-col items-center justify-center w-16 relative" data-tab="live" onclick="app.navigate('live')">
                    <div class="absolute -top-1 bg-red-500 w-2 h-2 rounded-full animate-ping hidden" id="live-indicator"></div>
                    <span class="text-3xl mb-0.5 text-gray-400">‚óé</span>
                    <span class="text-[10px] font-medium">Live Hub</span>
                </button>
                <button class="nav-item flex flex-col items-center justify-center w-16" data-tab="profile" onclick="app.navigate('profile')">
                    <span class="text-2xl mb-1">üéì</span>
                    <span class="text-[10px] font-medium">T√¥i</span>
                </button>
            </div>
        </nav>
    </div>

    <script>
        const store = {
            isLoggedIn: false,
            user: { name: "Nhi Le", trustScore: 450, completedNodes: [1, 2], currentNode: 3 },
            roadmap: [
                { id: 1, title: "Th·∫•u hi·ªÉu b·∫£n th√¢n", category: "T√¢m l√Ω", type: "Kh√≥a h·ªçc", icon: "üßò‚Äç‚ôÄÔ∏è", status: "completed", desc: "Kh√°m ph√° g·ªëc r·ªÖ c·ªßa suy nghƒ© v√† c·∫£m x√∫c." },
                { id: 2, title: "Qu·∫£n tr·ªã c·∫£m x√∫c", category: "T√¢m l√Ω", type: "Th·ª≠ th√°ch", icon: "‚ù§Ô∏è", status: "current", desc: "L√†m ch·ªß ph·∫£n ·ª©ng tr∆∞·ªõc m·ªçi t√¨nh hu·ªëng." },
                { id: 3, title: "T∆∞ duy L√£nh ƒë·∫°o", category: "L√£nh ƒë·∫°o", type: "Kh√≥a h·ªçc", icon: "ü¶Å", status: "locked", desc: "X√¢y d·ª±ng t·∫ßm nh√¨n v√† d·∫´n d·∫Øt ƒë·ªôi nh√≥m." },
                { id: 4, title: "V·∫≠n h√†nh ƒë·ªôi nh√≥m", category: "Leadership", type: "Th·ª±c h√†nh", icon: "ü§ù", status: "locked", desc: "H·ªá th·ªëng h√≥a quy tr√¨nh v√† con ng∆∞·ªùi." },
            ],
            categories: [
                { name: "T√¢m l√Ω", icon: "üß†" },
                { name: "L√£nh ƒë·∫°o", icon: "ü§ù" },
                { name: "AI Business", icon: "üí°" },
                { name: "ƒê·∫ßu t∆∞", icon: "üèÜ" }
            ],
            stories: [
                { id: 1, name: "Nhi Le", avatar: "NL", active: true },
                { id: 2, name: "Minh Anh", avatar: "MA", active: true },
                { id: 3, name: "Tu·∫•n H∆∞ng", avatar: "TH", active: true },
                { id: 4, name: "Lan Chi", avatar: "LC", active: false },
                { id: 5, name: "B·∫£o Ng·ªçc", avatar: "BN", active: false }
            ],
            posts: [
                { id: 1, author: "Minh Anh", avatar: "MA", location: "H√† N·ªôi", content: "V·ª´a ho√†n th√†nh 7 ng√†y detox c·∫£m x√∫c. C·∫£m th·∫•y nh·∫π nh√†ng h∆°n r·∫•t nhi·ªÅu! üå±", likes: 245, comments: 15, visual: "bg-amber-50" },
                { id: 2, author: "Tu·∫•n H∆∞ng", avatar: "TH", location: "TP. H·ªì Ch√≠ Minh", content: "AI ƒëang thay ƒë·ªïi c√°ch team Sales v·∫≠n h√†nh. B·∫°n ƒë√£ s·∫µn s√†ng ch∆∞a? üöÄ", likes: 182, comments: 24, visual: "bg-blue-50" }
            ],
            chatHistory: [{ sender: "ai", text: "Ch√†o b·∫°n, nh√† b·ª•i r·ªìi. V√†o vi·ªác ngay hay ƒë·ªãnh ƒë·ªÉ cu·ªôc ƒë·ªùi d·∫≠m ch√¢n t·∫°i ch·ªó? üßπ" }]
        };

        const app = {
            init: () => {
                // Initial setup
            },

            signIn: () => {
                const authScreen = document.getElementById('auth-container');
                const mainApp = document.getElementById('main-app');
                const aiTrigger = document.getElementById('ai-trigger');
                
                authScreen.classList.add('transition-opacity', 'duration-500', 'opacity-0');
                setTimeout(() => {
                    authScreen.classList.add('hidden');
                    mainApp.classList.remove('hidden');
                    aiTrigger.classList.remove('hidden');
                    store.isLoggedIn = true;
                    app.render('home');
                    app.checkWakeUpCall();
                }, 500);
            },

            navigate: (tab) => {
                document.querySelectorAll('.nav-item').forEach(el => {
                    el.classList.remove('active', 'active-learning');
                });
                const activeEl = document.querySelector(`.nav-item[data-tab="${tab}"]`);
                if (tab === 'home') {
                    activeEl.classList.add('active-learning');
                } else {
                    activeEl.classList.add('active');
                }
                app.render(tab);
            },

            render: (tab) => {
                const container = document.getElementById('app-content');
                const header = document.getElementById('main-header');
                container.innerHTML = '';
                header.innerHTML = ''; 
                
                if(tab === 'home') {
                    app.renderHomeHeader(header);
                    app.renderHome(container);
                } else {
                    app.renderDefaultHeader(header, tab);
                    if(tab === 'community') app.renderCommunity(container);
                    else if(tab === 'live') app.renderLive(container);
                    else if(tab === 'profile') app.renderProfile(container);
                }
            },
            
            renderHomeHeader: (header) => {
                header.innerHTML = `
                    <div class="flex justify-between items-center fade-in">
                        <div>
                            <p class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">L·ªò TR√åNH C·ª¶A B·∫†N</p>
                            <h1 class="text-2xl font-bold tracking-tight">${store.user.name}</h1>
                        </div>
                        <div class="flex items-center space-x-2 bg-white rounded-full px-3 py-1.5 shadow-sm border border-gray-100 cursor-pointer" onclick="app.showTrustScoreDetails()">
                            <span class="text-yellow-500 text-lg">üèÜ</span>
                            <span class="font-bold text-sm">${store.user.trustScore}</span>
                        </div>
                    </div>
                `;
            },
            
            renderDefaultHeader: (header, tab) => {
                const titleMap = {
                    'community': 'K·∫øt N·ªëi',
                    'live': 'Live Hub',
                    'profile': 'T√¥i'
                };
                header.innerHTML = `
                    <div class="flex justify-between items-center fade-in">
                        <div class="flex items-center space-x-3">
                             <div class="w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center font-bold text-amber-800 border border-gray-100">N</div>
                             <div>
                                <p class="text-[10px] text-gray-400 uppercase tracking-widest font-bold">${tab === 'community' ? 'C·ªông ƒë·ªìng' : 'C√° nh√¢n'}</p>
                                <h1 class="text-xl font-bold tracking-tight">${titleMap[tab]}</h1>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 bg-white px-3 py-1.5 rounded-full shadow-sm border border-gray-100 cursor-pointer" onclick="app.showTrustScoreDetails()">
                            <span class="text-lg">üå±</span>
                            <span class="font-bold text-amber-800 text-sm">${store.user.trustScore}</span>
                        </div>
                    </div>
                `;
            },
            
            renderHome: (container) => {
                const currentNode = store.roadmap.find(node => node.status === 'current');
                
                let html = `
                    <div class="p-4 fade-in">
                        <!-- Search Bar -->
                        <div class="relative mb-8">
                            <span class="absolute top-1/2 left-4 transform -translate-y-1/2 text-gray-400">üîç</span>
                            <input 
                                type="text" 
                                placeholder="B·∫°n mu·ªën h·ªçc g√¨ h√¥m nay?" 
                                class="w-full bg-white rounded-2xl py-3.5 pl-12 pr-4 shadow-sm border border-gray-100 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition"
                            />
                        </div>

                        <!-- Continue Journey -->
                        ${currentNode ? `
                        <section class="mb-8">
                            <div class="flex justify-between items-center mb-3">
                                <h2 class="text-lg font-bold tracking-tight">Ti·∫øp t·ª•c h√†nh tr√¨nh</h2>
                                <a href="#" class="text-[10px] font-bold text-amber-600 tracking-widest">XEM T·∫§T C·∫¢</a>
                            </div>
                            <div class="card p-6 flex items-center border border-gray-100">
                                <div class="w-16 h-16 bg-amber-50 rounded-2xl flex items-center justify-center mr-4 shadow-inner">
                                    <span class="text-3xl">${currentNode.icon}</span>
                                </div>
                                <div class="flex-grow">
                                    <p class="text-[10px] text-amber-600 font-bold uppercase mb-1">ƒêANG H·ªåC - 45% HO√ÄN T·∫§T</p>
                                    <h3 class="font-bold text-md leading-tight">${currentNode.title}</h3>
                                    <p class="text-xs text-gray-500 mt-1 line-clamp-1">${currentNode.desc}</p>
                                    <div class="w-full bg-gray-100 rounded-full h-1.5 mt-3">
                                        <div class="bg-amber-400 h-1.5 rounded-full" style="width: 45%"></div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        ` : ''}

                        <!-- Explore by Topic -->
                        <section class="mb-8">
                            <h2 class="text-lg font-bold mb-4 tracking-tight">Kh√°m ph√° theo ch·ªß ƒë·ªÅ</h2>
                            <div class="grid grid-cols-2 gap-4">
                                ${store.categories.map(cat => `
                                    <div class="bg-white rounded-2xl shadow-sm p-4 flex items-center space-x-3 cursor-pointer border border-gray-50 hover:bg-gray-50 transition">
                                        <span class="text-2xl">${cat.icon}</span>
                                        <span class="text-sm font-bold text-gray-700">${cat.name}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </section>

                        <!-- Recommended Roadmap -->
                        <section class="pb-20">
                            <h2 class="text-lg font-bold mb-4 tracking-tight">L·ªô tr√¨nh ƒë·ªÅ xu·∫•t</h2>
                            <div class="space-y-4">
                            ${store.roadmap.map(node => {
                                const isLocked = node.status === 'locked';
                                const isCompleted = node.status === 'completed';
                                const isCurrent = node.status === 'current';
                                
                                let statusBadge = `<div class="mt-3 bg-gray-100 text-gray-500 text-[10px] font-bold px-2 py-0.5 rounded-md inline-block">LOCKED</div>`;
                                let actionIcon = `<span class="text-gray-300 text-2xl mb-2">üîí</span>`;
                                let actionText = `<span class="text-[10px] font-bold text-gray-300 uppercase">B·∫ÆT ƒê·∫¶U</span>`;

                                if (isCompleted) {
                                    statusBadge = `<div class="mt-3 bg-green-50 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-md inline-block uppercase tracking-wider">Ho√†n t·∫•t</div>`;
                                    actionIcon = `<span class="text-green-500 text-2xl mb-2">‚úîÔ∏è</span>`;
                                    actionText = `<span class="text-[10px] font-bold text-green-600 uppercase">XEM L·∫†I</span>`;
                                } else if (isCurrent) {
                                    statusBadge = `<div class="mt-3 bg-amber-50 text-amber-700 text-[10px] font-bold px-2 py-0.5 rounded-md inline-block uppercase tracking-wider">ƒêang h·ªçc</div>`;
                                    actionIcon = `<span class="text-red-500 text-2xl mb-2">‚ù§Ô∏è</span>`;
                                    actionText = `<a href="#" class="text-[10px] font-bold text-amber-600 uppercase">TI·∫æP T·ª§C</a>`;
                                }

                                return `
                                <div class="card p-5 border border-gray-50 ${isLocked ? 'opacity-60' : ''}">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <p class="text-[10px] font-bold text-gray-400 uppercase tracking-tighter">${node.category} ‚Ä¢ ${node.type}</p>
                                            <h3 class="font-bold text-md mt-1 text-gray-800">${node.title}</h3>
                                            <p class="text-xs text-gray-500 mt-1 leading-relaxed">${node.desc}</p>
                                            ${statusBadge}
                                        </div>
                                        <div class="ml-4 flex flex-col items-center justify-center min-w-[60px]">
                                            ${actionIcon}
                                            ${actionText}
                                        </div>
                                    </div>
                                </div>
                                `;
                            }).join('')}
                            </div>
                        </section>
                    </div>
                `;
                container.innerHTML = html;
            },

            // --- VIEW: COMMUNITY (INSTAGRAM STYLE) ---
            renderCommunity: (container) => {
                let html = `
                    <div class="fade-in pb-20">
                        <!-- Stories Section -->
                        <div class="flex space-x-4 overflow-x-auto px-4 py-4 no-scrollbar bg-white border-b border-gray-50">
                            ${store.stories.map(story => `
                                <div class="flex flex-col items-center space-y-1 flex-shrink-0">
                                    <div class="${story.active ? 'story-ring' : 'p-[2px] bg-gray-200 rounded-full'}">
                                        <div class="w-16 h-16 bg-gray-100 story-avatar flex items-center justify-center text-xs font-bold text-gray-400">
                                            ${story.avatar}
                                        </div>
                                    </div>
                                    <span class="text-[10px] font-medium text-gray-600">${story.name}</span>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Posts Feed -->
                        <div class="space-y-6 mt-4">
                            ${store.posts.map(post => `
                                <div class="bg-white border-y border-gray-50">
                                    <!-- Post Header -->
                                    <div class="flex items-center justify-between p-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-[10px] font-bold text-gray-400 border border-gray-50">
                                                ${post.avatar}
                                            </div>
                                            <div>
                                                <h4 class="text-xs font-bold text-gray-800 leading-none">${post.author}</h4>
                                                <span class="text-[9px] text-gray-400 font-medium">${post.location}</span>
                                            </div>
                                        </div>
                                        <button class="text-gray-400">‚Ä¢‚Ä¢‚Ä¢</button>
                                    </div>

                                    <!-- Post Visual (Placeholder) -->
                                    <div class="w-full aspect-square ${post.visual} flex items-center justify-center relative overflow-hidden group">
                                        <div class="absolute inset-0 bg-black/0 group-active:bg-black/10 transition-colors"></div>
                                        <span class="text-3xl opacity-20 transform group-hover:scale-110 transition-transform">‚ú®</span>
                                    </div>

                                    <!-- Post Actions -->
                                    <div class="p-4">
                                        <div class="flex items-center justify-between mb-3">
                                            <div class="flex items-center space-x-4">
                                                <button class="text-2xl transform active:scale-125 transition-transform" onclick="app.giveSeed(this)">üå±</button>
                                                <button class="text-xl">üí¨</button>
                                                <button class="text-xl">üöÄ</button>
                                            </div>
                                            <button class="text-xl">üîñ</button>
                                        </div>
                                        
                                        <!-- Post Info -->
                                        <div class="space-y-1">
                                            <p class="text-xs font-bold text-gray-800">
                                                <span id="like-count-${post.id}">${post.likes}</span> m·∫ßm m·ªëng ƒë∆∞·ª£c t·∫∑ng
                                            </p>
                                            <p class="text-xs text-gray-700 leading-relaxed">
                                                <span class="font-bold mr-1">${post.author}</span>
                                                ${post.content}
                                            </p>
                                            <button class="text-xs text-gray-400 mt-1">Xem t·∫•t c·∫£ ${post.comments} b√¨nh lu·∫≠n</button>
                                            <p class="text-[9px] text-gray-300 uppercase tracking-tighter mt-1">V·ª´a xong</p>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML = html;
            },

            renderLive: (container) => {
                container.innerHTML = `<div class="flex flex-col items-center justify-center h-full text-center fade-in px-6">
                    <div class="w-24 h-24 bg-white rounded-full shadow-inner flex items-center justify-center text-4xl mb-4 grayscale opacity-40">üî¥</div>
                    <h3 class="text-lg font-bold text-gray-400 tracking-tight">Hi·ªán ch∆∞a c√≥ l·ªõp h·ªçc</h3>
                    <p class="text-xs text-gray-500 mt-2 max-w-[200px]">Nhi s·∫Ω th√¥ng b√°o khi bu·ªïi hu·∫•n luy·ªán tr·ª±c ti·∫øp b·∫Øt ƒë·∫ßu.</p>
                </div>`;
            },

            renderProfile: (container) => {
                container.innerHTML = `<div class="fade-in text-center px-6 pt-10 pb-20">
                    <div class="w-24 h-24 mx-auto bg-white rounded-full mb-3 border-4 border-white shadow-lg flex items-center justify-center text-3xl">üë§</div>
                    <h2 class="text-xl font-bold tracking-tight">${store.user.name}</h2>
                    <p class="text-xs text-gray-400 mt-1 uppercase tracking-widest font-bold">H·∫°t gi·ªëng ti·ªÅm nƒÉng</p>
                    
                    <div class="grid grid-cols-3 gap-3 mt-8">
                        <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-50">
                            <div class="text-xl mb-1">üèÜ</div>
                            <div class="font-bold text-amber-600 text-sm">${store.user.trustScore}</div>
                            <div class="text-[8px] text-gray-400 font-bold uppercase">Trust Score</div>
                        </div>
                        <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100">
                            <div class="text-xl mb-1">üî•</div>
                            <div class="font-bold text-amber-600 text-sm">12</div>
                            <div class="text-[8px] text-gray-400 font-bold uppercase tracking-tighter">Streak</div>
                        </div>
                        <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-100">
                            <div class="text-xl mb-1">üéì</div>
                            <div class="font-bold text-amber-600 text-sm">2</div>
                            <div class="text-[8px] text-gray-400 font-bold uppercase">Diploma</div>
                        </div>
                    </div>
                    
                    <div class="mt-8 bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                        <h3 class="font-bold mb-6 text-sm text-gray-800 uppercase tracking-widest">Bi·ªÉu ƒë·ªì k·ªπ nƒÉng</h3>
                        <div class="chart-container"><canvas id="skillsChart"></canvas></div>
                    </div>
                </div>`;
                setTimeout(app.initChart, 100);
            },

            initChart: () => {
                const ctx = document.getElementById('skillsChart').getContext('2d');
                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['L√£nh ƒë·∫°o', 'T√¢m l√Ω', 'AI Business', 'K·ª∑ lu·∫≠t', 'K·∫øt n·ªëi'],
                        datasets: [{ 
                            data: [65, 80, 45, 70, 60], 
                            backgroundColor: 'rgba(251, 191, 36, 0.1)', 
                            borderColor: 'rgba(251, 191, 36, 1)', 
                            pointBackgroundColor: 'rgba(251, 191, 36, 1)', 
                            borderWidth: 2 
                        }]
                    },
                    options: { 
                        maintainAspectRatio: false, 
                        scales: { 
                            r: { 
                                ticks: { display: false }, 
                                grid: { color: 'rgba(0,0,0,0.03)' },
                                pointLabels: { font: { size: 10, weight: '600' } }
                            } 
                        }, 
                        plugins: { legend: { display: false } } 
                    }
                });
            },

            checkWakeUpCall: () => {
                setTimeout(() => {
                    app.addAIMessage("Ch√†o b·∫°n, nh√† b·ª•i r·ªìi. V√†o vi·ªác ngay hay ƒë·ªãnh ƒë·ªÉ cu·ªôc ƒë·ªùi d·∫≠m ch√¢n t·∫°i ch·ªó? üßπ");
                }, 3000);
            },

            toggleAIChat: (forceOpen = false) => {
                const modal = document.getElementById('ai-modal');
                const panel = document.getElementById('ai-panel');
                if (modal.classList.contains('hidden') || forceOpen) {
                    modal.classList.remove('hidden');
                    setTimeout(() => panel.classList.remove('translate-y-full'), 10);
                } else {
                    panel.classList.add('translate-y-full');
                    setTimeout(() => modal.classList.add('hidden'), 300);
                }
            },

            sendMessage: () => {
                const input = document.getElementById('ai-input');
                const text = input.value.trim();
                if (!text) return;
                const history = document.getElementById('chat-history');
                const userMsg = document.createElement('div');
                userMsg.className = "flex justify-end fade-in";
                userMsg.innerHTML = `<div class="bg-gray-100 text-gray-800 px-4 py-2 rounded-t-xl rounded-bl-xl max-w-[80%] text-xs">${text}</div>`;
                history.appendChild(userMsg);
                input.value = '';
                setTimeout(() => app.addAIMessage("ƒê·ª´ng ch·ªâ h·ªèi, h√£y h√†nh ƒë·ªông. C√¢u tr·∫£ l·ªùi n·∫±m ·ªü ƒë√¥i tay c·ªßa b·∫°n."), 1000);
            },

            addAIMessage: (text) => {
                const history = document.getElementById('chat-history');
                const aiMsg = document.createElement('div');
                aiMsg.className = "flex justify-start fade-in";
                aiMsg.innerHTML = `<div class="flex items-end space-x-2"><div class="w-6 h-6 rounded-full bg-amber-800 text-white flex items-center justify-center text-[10px] font-bold">N</div><div class="bg-white border border-gray-100 shadow-sm text-gray-800 px-4 py-2 rounded-t-xl rounded-br-xl max-w-[80%] text-xs leading-relaxed">${text}</div></div>`;
                history.appendChild(aiMsg);
                history.scrollTop = history.scrollHeight;
            },

            giveSeed: (btn) => {
                // Animation & Feedback
                btn.classList.add('scale-150');
                setTimeout(() => btn.classList.remove('scale-150'), 200);
                
                // Logic update trust score (simulated)
                store.user.trustScore += 1;
                document.getElementById('trust-score').innerText = store.user.trustScore;
            },

            showTrustScoreDetails: () => {
                alert(`Trust Score: ${store.user.trustScore}\n\nB·∫°n ƒëang l√† "H·∫°t gi·ªëng Ti·ªÅm nƒÉng".\n\nƒêi·ªÉm s·ªë n√†y th·ªÉ hi·ªán s·ª± tin t∆∞·ªüng c·ªßa c·ªông ƒë·ªìng qua c√°c ƒë√≥ng g√≥p v√† k·ª∑ lu·∫≠t h·ªçc t·∫≠p c·ªßa b·∫°n. H√£y ti·∫øp t·ª•c duy tr√¨!`);
            }
        };

        document.addEventListener('DOMContentLoaded', app.init);
    </script>
</body>
</html>